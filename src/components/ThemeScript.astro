---

---

<script is:inline>
  // 即時実行関数でグローバル汚染を防ぐ
  ;(function () {
    function getTheme() {
      if (
        typeof localStorage !== 'undefined' &&
        localStorage.getItem('theme')
      ) {
        return localStorage.getItem('theme')
      }
      if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        return 'dark'
      }
      return 'light'
    }

    function applyTheme() {
      const theme = getTheme()
      if (theme === 'dark') {
        document.documentElement.classList.add('dark')
      } else {
        document.documentElement.classList.remove('dark')
      }
    }

    // 初回ロード時にテーマを適用
    applyTheme()

    // View Transitions使用時のページ遷移後にもテーマを適用
    document.addEventListener('astro:after-swap', applyTheme)
  })()
</script>
