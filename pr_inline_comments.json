[
  {
    "url": "https://api.github.com/repos/milkmaccya2/mm2-blog/pulls/comments/2778452264",
    "pull_request_review_id": 3768764442,
    "id": 2778452264,
    "node_id": "PRRC_kwDORGFzjM6lm9Eo",
    "diff_hunk": "@@ -0,0 +1,142 @@\n+import { gsap } from 'gsap';\n+import { ScrollTrigger } from 'gsap/ScrollTrigger';\n+\n+gsap.registerPlugin(ScrollTrigger);\n+\n+let mm: gsap.MatchMedia | undefined;\n+\n+export function initAnimations() {\n+  // Clean up previous context if it needs a full reset\n+  if (mm) mm.revert();\n+\n+  mm = gsap.matchMedia();\n+\n+  // Only play animations if user has no preference for reduced motion\n+  mm.add('(prefers-reduced-motion: no-preference)', () => {\n+    // Background blob\n+    const blobs = document.querySelectorAll('.animate-blob');\n+    if (blobs.length > 0) {\n+      gsap.to(blobs, {\n+        opacity: 1,\n+        duration: 2,\n+        ease: 'power2.inOut',\n+      });\n+    }\n+\n+    // Block Reveal Animations\n+    const revealWraps = document.querySelectorAll('.reveal-wrap');\n+    if (revealWraps.length > 0) {\n+      revealWraps.forEach((wrap) => {\n+        const block = wrap.querySelector('.reveal-block');\n+        const content = wrap.querySelector('.reveal-content');\n+\n+        // Skip if required children are missing\n+        if (!block || !content) return;\n+\n+        const tl = gsap.timeline({\n+          defaults: { ease: 'power2.inOut' },\n+          scrollTrigger: {\n+            trigger: wrap,\n+            start: 'top 90%',\n+          },\n+        });\n+\n+        tl.to(block, {\n+          scaleX: 1,\n+          duration: 0.6,\n+          transformOrigin: 'left',\n+        })\n+          .set(content, { opacity: 1 })\n+          .to(block, {\n+            scaleX: 0,\n+            duration: 0.6,\n+            transformOrigin: 'right',\n+          });\n+      });\n+    }\n+\n+    // Secondary text fade in (Subtitle second line)\n+    const fadeIns = document.querySelectorAll('.fade-in-up');\n+    if (fadeIns.length > 0) {\n+      gsap.to(fadeIns, {\n+        y: 0,\n+        opacity: 1,\n+        duration: 0.8,\n+        ease: 'power2.out',\n+        scrollTrigger: {\n+          trigger: '.fade-in-up', // Note: Using selector here might trigger all at once if multiple exist. Consider specific iteration if needed.\n+          start: 'top 90%',\n+          toggleActions: 'play none none reverse',\n+        },\n+      });",
    "path": "src/scripts/animations.ts",
    "commit_id": "3ae28c6e9c338742e84b4c198fdbbdc70ca66c96",
    "original_commit_id": "3ae28c6e9c338742e84b4c198fdbbdc70ca66c96",
    "user": {
      "login": "gemini-code-assist[bot]",
      "id": 176961590,
      "node_id": "BOT_kgDOCow4Ng",
      "avatar_url": "https://avatars.githubusercontent.com/in/956858?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gemini-code-assist%5Bbot%5D",
      "html_url": "https://github.com/apps/gemini-code-assist",
      "followers_url": "https://api.github.com/users/gemini-code-assist%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/gemini-code-assist%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/gemini-code-assist%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gemini-code-assist%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gemini-code-assist%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/gemini-code-assist%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/gemini-code-assist%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/gemini-code-assist%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gemini-code-assist%5Bbot%5D/received_events",
      "type": "Bot",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "![medium](https://www.gstatic.com/codereviewagent/medium-priority.svg)\n\n`.fade-in-up`アニメーションの現在の実装では、`scrollTrigger`の`trigger`にセレクタ文字列 (`'.fade-in-up'`) を使用しています。これだと、このクラスを持つ要素が複数存在する場合、最初の要素がビューポートに入ったタイミングで全ての要素が同時にアニメーションしてしまいます。67行目のコメントでご自身でも懸念されている通り、これは意図した動作ではない可能性があります。\n\nこのアニメーションを真に再利用可能にし、各要素がビューポートに入ったときに個別にアニメーションするようにするには、見つかった要素をループ処理し、各要素自体をトリガーとして設定するのが良いでしょう。\n\n```typescript\n      fadeIns.forEach((fadeIn) => {\n        gsap.to(fadeIn, {\n          y: 0,\n          opacity: 1,\n          duration: 0.8,\n          ease: 'power2.out',\n          scrollTrigger: {\n            trigger: fadeIn,\n            start: 'top 90%',\n            toggleActions: 'play none none reverse',\n          },\n        });\n      });\n```",
    "created_at": "2026-02-08T03:41:58Z",
    "updated_at": "2026-02-08T03:41:58Z",
    "html_url": "https://github.com/milkmaccya2/mm2-blog/pull/36#discussion_r2778452264",
    "pull_request_url": "https://api.github.com/repos/milkmaccya2/mm2-blog/pulls/36",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/milkmaccya2/mm2-blog/pulls/comments/2778452264"
      },
      "html": { "href": "https://github.com/milkmaccya2/mm2-blog/pull/36#discussion_r2778452264" },
      "pull_request": { "href": "https://api.github.com/repos/milkmaccya2/mm2-blog/pulls/36" }
    },
    "reactions": {
      "url": "https://api.github.com/repos/milkmaccya2/mm2-blog/pulls/comments/2778452264/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": 61,
    "original_start_line": 61,
    "start_side": "RIGHT",
    "line": 71,
    "original_line": 71,
    "side": "RIGHT",
    "author_association": "NONE",
    "original_position": 71,
    "position": 71,
    "subject_type": "line"
  },
  {
    "url": "https://api.github.com/repos/milkmaccya2/mm2-blog/pulls/comments/2778452266",
    "pull_request_review_id": 3768764442,
    "id": 2778452266,
    "node_id": "PRRC_kwDORGFzjM6lm9Eq",
    "diff_hunk": "@@ -0,0 +1,142 @@\n+import { gsap } from 'gsap';\n+import { ScrollTrigger } from 'gsap/ScrollTrigger';\n+\n+gsap.registerPlugin(ScrollTrigger);\n+\n+let mm: gsap.MatchMedia | undefined;\n+\n+export function initAnimations() {\n+  // Clean up previous context if it needs a full reset\n+  if (mm) mm.revert();\n+\n+  mm = gsap.matchMedia();\n+\n+  // Only play animations if user has no preference for reduced motion\n+  mm.add('(prefers-reduced-motion: no-preference)', () => {\n+    // Background blob\n+    const blobs = document.querySelectorAll('.animate-blob');\n+    if (blobs.length > 0) {\n+      gsap.to(blobs, {\n+        opacity: 1,\n+        duration: 2,\n+        ease: 'power2.inOut',\n+      });\n+    }\n+\n+    // Block Reveal Animations\n+    const revealWraps = document.querySelectorAll('.reveal-wrap');\n+    if (revealWraps.length > 0) {\n+      revealWraps.forEach((wrap) => {\n+        const block = wrap.querySelector('.reveal-block');\n+        const content = wrap.querySelector('.reveal-content');\n+\n+        // Skip if required children are missing\n+        if (!block || !content) return;\n+\n+        const tl = gsap.timeline({\n+          defaults: { ease: 'power2.inOut' },\n+          scrollTrigger: {\n+            trigger: wrap,\n+            start: 'top 90%',\n+          },\n+        });\n+\n+        tl.to(block, {\n+          scaleX: 1,\n+          duration: 0.6,\n+          transformOrigin: 'left',\n+        })\n+          .set(content, { opacity: 1 })\n+          .to(block, {\n+            scaleX: 0,\n+            duration: 0.6,\n+            transformOrigin: 'right',\n+          });\n+      });\n+    }\n+\n+    // Secondary text fade in (Subtitle second line)\n+    const fadeIns = document.querySelectorAll('.fade-in-up');\n+    if (fadeIns.length > 0) {\n+      gsap.to(fadeIns, {\n+        y: 0,\n+        opacity: 1,\n+        duration: 0.8,\n+        ease: 'power2.out',\n+        scrollTrigger: {\n+          trigger: '.fade-in-up', // Note: Using selector here might trigger all at once if multiple exist. Consider specific iteration if needed.\n+          start: 'top 90%',\n+          toggleActions: 'play none none reverse',\n+        },\n+      });\n+    }\n+\n+    // Buttons animation\n+    const heroActions = document.querySelectorAll('.hero-actions');\n+    if (heroActions.length > 0) {\n+      gsap.to(heroActions, {\n+        y: 0,\n+        opacity: 1,\n+        duration: 0.8,\n+        ease: 'power2.out',\n+        scrollTrigger: {\n+          trigger: '.hero-actions',\n+          start: 'top 90%',\n+          toggleActions: 'play none none reverse',\n+        },\n+      });\n+    }\n+\n+    // Section Header\n+    const sectionHeaders = document.querySelectorAll('.section-header');\n+    if (sectionHeaders.length > 0) {\n+      // Assuming section header is usually related to a posts section, but we can make it more generic\n+      // If .posts-section exists, trigger based on it, otherwise trigger based on self\n+      const postsSection = document.querySelector('.posts-section');\n+      const trigger = postsSection || '.section-header';\n+\n+      gsap.to(sectionHeaders, {\n+        opacity: 1,\n+        duration: 0.8,\n+        scrollTrigger: {\n+          trigger: trigger,\n+          start: 'top 85%',\n+        },\n+      });",
    "path": "src/scripts/animations.ts",
    "commit_id": "3ae28c6e9c338742e84b4c198fdbbdc70ca66c96",
    "original_commit_id": "3ae28c6e9c338742e84b4c198fdbbdc70ca66c96",
    "user": {
      "login": "gemini-code-assist[bot]",
      "id": 176961590,
      "node_id": "BOT_kgDOCow4Ng",
      "avatar_url": "https://avatars.githubusercontent.com/in/956858?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gemini-code-assist%5Bbot%5D",
      "html_url": "https://github.com/apps/gemini-code-assist",
      "followers_url": "https://api.github.com/users/gemini-code-assist%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/gemini-code-assist%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/gemini-code-assist%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gemini-code-assist%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gemini-code-assist%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/gemini-code-assist%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/gemini-code-assist%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/gemini-code-assist%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gemini-code-assist%5Bbot%5D/received_events",
      "type": "Bot",
      "user_view_type": "public",
      "site_admin": false
    },
    "body": "![medium](https://www.gstatic.com/codereviewagent/medium-priority.svg)\n\n`.section-header`のアニメーションロジックには潜在的な問題があります。`document.querySelector('.posts-section')`はドキュメント内で最初に見つかった要素を返すため、すべての`.section-header`要素が、この最初のセクションをトリガーとしてアニメーションを開始してしまいます。複数のセクションとヘッダーがあるページでは、意図しないタイミングでアニメーションが発火する可能性があります。\n\nより堅牢なアプローチは、各`.section-header`をループ処理し、それぞれに対応するトリガー（例えば`closest()`で最も近い祖先の`.posts-section`を探すなど）を見つけることです。これにより、各ヘッダーが自身のセクションを基準に正しくアニメーションされるようになります。\n\n```typescript\n      // Assuming section header is usually related to a posts section, but we can make it more generic\n      // If .posts-section exists, trigger based on it, otherwise trigger based on self\n      sectionHeaders.forEach((header) => {\n        const triggerElement = header.closest('.posts-section') || header;\n        gsap.to(header, {\n          opacity: 1,\n          duration: 0.8,\n          scrollTrigger: {\n            trigger: triggerElement,\n            start: 'top 85%',\n          },\n        });\n      });\n```",
    "created_at": "2026-02-08T03:41:58Z",
    "updated_at": "2026-02-08T03:41:58Z",
    "html_url": "https://github.com/milkmaccya2/mm2-blog/pull/36#discussion_r2778452266",
    "pull_request_url": "https://api.github.com/repos/milkmaccya2/mm2-blog/pulls/36",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/milkmaccya2/mm2-blog/pulls/comments/2778452266"
      },
      "html": { "href": "https://github.com/milkmaccya2/mm2-blog/pull/36#discussion_r2778452266" },
      "pull_request": { "href": "https://api.github.com/repos/milkmaccya2/mm2-blog/pulls/36" }
    },
    "reactions": {
      "url": "https://api.github.com/repos/milkmaccya2/mm2-blog/pulls/comments/2778452266/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": 93,
    "original_start_line": 93,
    "start_side": "RIGHT",
    "line": 105,
    "original_line": 105,
    "side": "RIGHT",
    "author_association": "NONE",
    "original_position": 105,
    "position": 105,
    "subject_type": "line"
  }
]
